#!/bin/bash
# Cancel a running task
# Usage: cancel-task <task_id>

set -e

if [ -z "$BLACKBOX_API_KEY" ]; then
    echo "Error: BLACKBOX_API_KEY environment variable not set" >&2
    exit 1
fi

if [ -z "$1" ]; then
    echo "Usage: cancel-task <task_id>" >&2
    echo "Example: cancel-task 9qQe2F8Z_nXx9-eJA0BD6" >&2
    exit 1
fi

TASK_ID="$1"

# Make API request
curl -s -X PATCH "https://cloud.blackbox.ai/api/tasks/$TASK_ID" \
  -H "Authorization: Bearer $BLACKBOX_API_KEY" \
  -H 'Content-Type: application/json' \
  -d '{"action": "stop"}' | jq .
